<!DOCTYPE html>
<html>
<head>
    

    

    
<!-- Baidu Tongji -->
<script>var _hmt = _hmt || []</script>
<script async src="//hm.baidu.com/hm.js?6793943ebee3558917970a50987cf13b"></script>
<!-- End Baidu Tongji -->




    <meta charset="utf-8">
    
    
    
    
    <title>部署小说api服务到腾讯云 | 蓝胖纸 | 哆啦A梦</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Node.js,Express,API,部署">
    <meta name="description" content="部署小说api服务到腾讯云小说api1.0版本写完了，接下来就开始部署到服务器上，用到了nginx、pm2、nvm、git、OpenSSL。">
<meta name="keywords" content="Node.js,Express,API,部署">
<meta property="og:type" content="article">
<meta property="og:title" content="部署小说api服务到腾讯云">
<meta property="og:url" content="http://blog.langpz.com/部署小说api服务到腾讯云.html">
<meta property="og:site_name" content="蓝胖纸">
<meta property="og:description" content="部署小说api服务到腾讯云小说api1.0版本写完了，接下来就开始部署到服务器上，用到了nginx、pm2、nvm、git、OpenSSL。">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://hexo-1252491761.file.myqcloud.com/%E9%83%A8%E7%BD%B2%E5%B0%8F%E8%AF%B4api%E6%9C%8D%E5%8A%A1%E5%88%B0%E8%85%BE%E8%AE%AF%E4%BA%91/QQ%E5%9B%BE%E7%89%8720180529113617.png">
<meta property="og:image" content="http://hexo-1252491761.file.myqcloud.com/%E9%83%A8%E7%BD%B2%E5%B0%8F%E8%AF%B4api%E6%9C%8D%E5%8A%A1%E5%88%B0%E8%85%BE%E8%AE%AF%E4%BA%91/QQ%E5%9B%BE%E7%89%8720180529134733.png">
<meta property="og:image" content="http://hexo-1252491761.file.myqcloud.com/%E9%83%A8%E7%BD%B2%E5%B0%8F%E8%AF%B4api%E6%9C%8D%E5%8A%A1%E5%88%B0%E8%85%BE%E8%AE%AF%E4%BA%91/QQ%E5%9B%BE%E7%89%8720180529140415.png">
<meta property="og:image" content="http://hexo-1252491761.file.myqcloud.com/%E9%83%A8%E7%BD%B2%E5%B0%8F%E8%AF%B4api%E6%9C%8D%E5%8A%A1%E5%88%B0%E8%85%BE%E8%AE%AF%E4%BA%91/QQ%E5%9B%BE%E7%89%8720180529140928.png">
<meta property="og:image" content="http://hexo-1252491761.file.myqcloud.com/%E9%83%A8%E7%BD%B2%E5%B0%8F%E8%AF%B4api%E6%9C%8D%E5%8A%A1%E5%88%B0%E8%85%BE%E8%AE%AF%E4%BA%91/QQ%E5%9B%BE%E7%89%8720180529141439.png">
<meta property="og:image" content="http://hexo-1252491761.file.myqcloud.com/%E9%83%A8%E7%BD%B2%E5%B0%8F%E8%AF%B4api%E6%9C%8D%E5%8A%A1%E5%88%B0%E8%85%BE%E8%AE%AF%E4%BA%91/QQ%E5%9B%BE%E7%89%8720180529142105.png">
<meta property="og:image" content="http://hexo-1252491761.file.myqcloud.com/%E9%83%A8%E7%BD%B2%E5%B0%8F%E8%AF%B4api%E6%9C%8D%E5%8A%A1%E5%88%B0%E8%85%BE%E8%AE%AF%E4%BA%91/QQ%E5%9B%BE%E7%89%8720180529143306.png">
<meta property="og:image" content="http://hexo-1252491761.file.myqcloud.com/%E9%83%A8%E7%BD%B2%E5%B0%8F%E8%AF%B4api%E6%9C%8D%E5%8A%A1%E5%88%B0%E8%85%BE%E8%AE%AF%E4%BA%91/QQ%E5%9B%BE%E7%89%8720180529143835.png">
<meta property="og:updated_time" content="2018-06-21T08:05:23.865Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="部署小说api服务到腾讯云">
<meta name="twitter:description" content="部署小说api服务到腾讯云小说api1.0版本写完了，接下来就开始部署到服务器上，用到了nginx、pm2、nvm、git、OpenSSL。">
<meta name="twitter:image" content="http://hexo-1252491761.file.myqcloud.com/%E9%83%A8%E7%BD%B2%E5%B0%8F%E8%AF%B4api%E6%9C%8D%E5%8A%A1%E5%88%B0%E8%85%BE%E8%AE%AF%E4%BA%91/QQ%E5%9B%BE%E7%89%8720180529113617.png">
    
        <link rel="alternate" type="application/atom+xml" title="蓝胖纸" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">lanpangzhi</h5>
          <a href="mailto:875727617@qq.com" title="875727617@qq.com" class="mail">875727617@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/lanpangzhi" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">部署小说api服务到腾讯云</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">部署小说api服务到腾讯云</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-05-29T11:00:08.000Z" itemprop="datePublished" class="page-time">
  2018-05-29
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#部署小说api服务到腾讯云"><span class="post-toc-number">1.</span> <span class="post-toc-text"><a href="#&#x90E8;&#x7F72;&#x5C0F;&#x8BF4;api&#x670D;&#x52A1;&#x5230;&#x817E;&#x8BAF;&#x4E91;" class="headerlink" title="&#x90E8;&#x7F72;&#x5C0F;&#x8BF4;api&#x670D;&#x52A1;&#x5230;&#x817E;&#x8BAF;&#x4E91;"></a>&#x90E8;&#x7F72;&#x5C0F;&#x8BF4;api&#x670D;&#x52A1;&#x5230;&#x817E;&#x8BAF;&#x4E91;</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第一步添加pm2配置文件"><span class="post-toc-number">1.1.</span> <span class="post-toc-text"><a href="#&#x7B2C;&#x4E00;&#x6B65;&#x6DFB;&#x52A0;pm2&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="headerlink" title="&#x7B2C;&#x4E00;&#x6B65;&#x6DFB;&#x52A0;pm2&#x914D;&#x7F6E;&#x6587;&#x4EF6;"></a>&#x7B2C;&#x4E00;&#x6B65;&#x6DFB;&#x52A0;pm2&#x914D;&#x7F6E;&#x6587;&#x4EF6;</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第二步购买服务器和域名"><span class="post-toc-number">1.2.</span> <span class="post-toc-text"><a href="#&#x7B2C;&#x4E8C;&#x6B65;&#x8D2D;&#x4E70;&#x670D;&#x52A1;&#x5668;&#x548C;&#x57DF;&#x540D;" class="headerlink" title="&#x7B2C;&#x4E8C;&#x6B65;&#x8D2D;&#x4E70;&#x670D;&#x52A1;&#x5668;&#x548C;&#x57DF;&#x540D;"></a>&#x7B2C;&#x4E8C;&#x6B65;&#x8D2D;&#x4E70;&#x670D;&#x52A1;&#x5668;&#x548C;&#x57DF;&#x540D;</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第三步设置子域名"><span class="post-toc-number">1.3.</span> <span class="post-toc-text"><a href="#&#x7B2C;&#x4E09;&#x6B65;&#x8BBE;&#x7F6E;&#x5B50;&#x57DF;&#x540D;" class="headerlink" title="&#x7B2C;&#x4E09;&#x6B65;&#x8BBE;&#x7F6E;&#x5B50;&#x57DF;&#x540D;"></a>&#x7B2C;&#x4E09;&#x6B65;&#x8BBE;&#x7F6E;&#x5B50;&#x57DF;&#x540D;</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#第四步登陆服务器安装软件"><span class="post-toc-number">1.4.</span> <span class="post-toc-text"><a href="#&#x7B2C;&#x56DB;&#x6B65;&#x767B;&#x9646;&#x670D;&#x52A1;&#x5668;&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;" class="headerlink" title="&#x7B2C;&#x56DB;&#x6B65;&#x767B;&#x9646;&#x670D;&#x52A1;&#x5668;&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;"></a>&#x7B2C;&#x56DB;&#x6B65;&#x767B;&#x9646;&#x670D;&#x52A1;&#x5668;&#x5B89;&#x88C5;&#x8F6F;&#x4EF6;</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#安装nginx"><span class="post-toc-number">1.4.1.</span> <span class="post-toc-text"><a href="#&#x5B89;&#x88C5;nginx" class="headerlink" title="&#x5B89;&#x88C5;nginx"></a>&#x5B89;&#x88C5;nginx</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#安装nvm"><span class="post-toc-number">1.4.2.</span> <span class="post-toc-text"><a href="#&#x5B89;&#x88C5;nvm" class="headerlink" title="&#x5B89;&#x88C5;nvm"></a>&#x5B89;&#x88C5;nvm</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#安装node和pm2、apidoc"><span class="post-toc-number">1.4.3.</span> <span class="post-toc-text"><a href="#&#x5B89;&#x88C5;node&#x548C;pm2&#x3001;apidoc" class="headerlink" title="&#x5B89;&#x88C5;node&#x548C;pm2&#x3001;apidoc"></a>&#x5B89;&#x88C5;node&#x548C;pm2&#x3001;apidoc</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#安装git"><span class="post-toc-number">1.4.4.</span> <span class="post-toc-text"><a href="#&#x5B89;&#x88C5;git" class="headerlink" title="&#x5B89;&#x88C5;git"></a>&#x5B89;&#x88C5;git</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#在服务器上克隆git仓库"><span class="post-toc-number">1.5.</span> <span class="post-toc-text"><a href="#&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x514B;&#x9686;git&#x4ED3;&#x5E93;" class="headerlink" title="&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x514B;&#x9686;git&#x4ED3;&#x5E93;"></a>&#x5728;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x514B;&#x9686;git&#x4ED3;&#x5E93;</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#配置nginx"><span class="post-toc-number">1.6.</span> <span class="post-toc-text"><a href="#&#x914D;&#x7F6E;nginx" class="headerlink" title="&#x914D;&#x7F6E;nginx"></a>&#x914D;&#x7F6E;nginx</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#gzip压缩"><span class="post-toc-number">1.6.1.</span> <span class="post-toc-text"><a href="#gzip&#x538B;&#x7F29;" class="headerlink" title="gzip&#x538B;&#x7F29;"></a>gzip&#x538B;&#x7F29;</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#隐藏nginx版本号"><span class="post-toc-number">1.6.2.</span> <span class="post-toc-text"><a href="#&#x9690;&#x85CF;nginx&#x7248;&#x672C;&#x53F7;" class="headerlink" title="&#x9690;&#x85CF;nginx&#x7248;&#x672C;&#x53F7;"></a>&#x9690;&#x85CF;nginx&#x7248;&#x672C;&#x53F7;</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#配置ssl证书https，给你的网站加个小绿锁"><span class="post-toc-number">1.6.3.</span> <span class="post-toc-text"><a href="#&#x914D;&#x7F6E;ssl&#x8BC1;&#x4E66;https&#xFF0C;&#x7ED9;&#x4F60;&#x7684;&#x7F51;&#x7AD9;&#x52A0;&#x4E2A;&#x5C0F;&#x7EFF;&#x9501;" class="headerlink" title="&#x914D;&#x7F6E;ssl&#x8BC1;&#x4E66;https&#xFF0C;&#x7ED9;&#x4F60;&#x7684;&#x7F51;&#x7AD9;&#x52A0;&#x4E2A;&#x5C0F;&#x7EFF;&#x9501;"></a>&#x914D;&#x7F6E;ssl&#x8BC1;&#x4E66;https&#xFF0C;&#x7ED9;&#x4F60;&#x7684;&#x7F51;&#x7AD9;&#x52A0;&#x4E2A;&#x5C0F;&#x7EFF;&#x9501;</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#申请腾讯云ssl证书"><span class="post-toc-number">1.6.3.1.</span> <span class="post-toc-text"><a href="#&#x7533;&#x8BF7;&#x817E;&#x8BAF;&#x4E91;ssl&#x8BC1;&#x4E66;" class="headerlink" title="&#x7533;&#x8BF7;&#x817E;&#x8BAF;&#x4E91;ssl&#x8BC1;&#x4E66;"></a>&#x7533;&#x8BF7;&#x817E;&#x8BAF;&#x4E91;ssl&#x8BC1;&#x4E66;</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#下载证书上传到服务器"><span class="post-toc-number">1.6.3.2.</span> <span class="post-toc-text"><a href="#&#x4E0B;&#x8F7D;&#x8BC1;&#x4E66;&#x4E0A;&#x4F20;&#x5230;&#x670D;&#x52A1;&#x5668;" class="headerlink" title="&#x4E0B;&#x8F7D;&#x8BC1;&#x4E66;&#x4E0A;&#x4F20;&#x5230;&#x670D;&#x52A1;&#x5668;"></a>&#x4E0B;&#x8F7D;&#x8BC1;&#x4E66;&#x4E0A;&#x4F20;&#x5230;&#x670D;&#x52A1;&#x5668;</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#加强-HTTPS-安全性"><span class="post-toc-number">1.6.3.3.</span> <span class="post-toc-text"><a href="#&#x52A0;&#x5F3A;-HTTPS-&#x5B89;&#x5168;&#x6027;" class="headerlink" title="&#x52A0;&#x5F3A; HTTPS &#x5B89;&#x5168;&#x6027;"></a>&#x52A0;&#x5F3A; HTTPS &#x5B89;&#x5168;&#x6027;</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#修改配置文件"><span class="post-toc-number">1.6.3.4.</span> <span class="post-toc-text"><a href="#&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;" class="headerlink" title="&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;"></a>&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#SSL安全测试"><span class="post-toc-number">1.7.</span> <span class="post-toc-text"><a href="#SSL&#x5B89;&#x5168;&#x6D4B;&#x8BD5;" class="headerlink" title="SSL&#x5B89;&#x5168;&#x6D4B;&#x8BD5;"></a>SSL&#x5B89;&#x5168;&#x6D4B;&#x8BD5;</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#总结"><span class="post-toc-number">1.8.</span> <span class="post-toc-text"><a href="#&#x603B;&#x7ED3;" class="headerlink" title="&#x603B;&#x7ED3;"></a>&#x603B;&#x7ED3;</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#参考"><span class="post-toc-number">2.</span> <span class="post-toc-text"><a href="#&#x53C2;&#x8003;" class="headerlink" title="&#x53C2;&#x8003;"></a>&#x53C2;&#x8003;</span></a></li></ol>
        </nav>
    </aside>


<article id="post-部署小说api服务到腾讯云"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">部署小说api服务到腾讯云</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-05-29 11:00:08" datetime="2018-05-29T11:00:08.000Z"  itemprop="datePublished">2018-05-29</time>

            


            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="部署小说api服务到腾讯云"><a href="#部署小说api服务到腾讯云" class="headerlink" title="部署小说api服务到腾讯云"></a>部署小说api服务到腾讯云</h1><p>小说api1.0版本写完了，接下来就开始部署到服务器上，用到了nginx、pm2、nvm、git、OpenSSL。<br><a id="more"></a><br>服务器配置: CentOS 7.4 64位 1 核 2 GB 1 Mbps<br>node版本: 8.9.0<br>nvm版本: 0.33.11<br>npm版本： 5.5.1<br>nginx版本：1.12.2<br>git版本: 2.9.5</p>
<h2 id="第一步添加pm2配置文件"><a href="#第一步添加pm2配置文件" class="headerlink" title="第一步添加pm2配置文件"></a>第一步添加pm2配置文件</h2><p>在小说api项目的根目录创建一个pm2.json的文件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;name&quot;: &quot;novel-api&quot;,  // 服务名</span><br><span class="line">    &quot;script&quot;: &quot;./bin/www&quot;, // 启动脚本</span><br><span class="line">    &quot;cwd&quot;: &quot;./&quot;,   // 当前工作路径</span><br><span class="line">    &quot;watch&quot;: [  // 监控变化的目录，一旦变化，自动重启</span><br><span class="line">        &quot;bin&quot;,</span><br><span class="line">        &quot;routers&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;ignore_watch&quot;: [  // 从监控目录中排除</span><br><span class="line">        &quot;node_modules&quot;,</span><br><span class="line">        &quot;logs&quot;,</span><br><span class="line">        &quot;public&quot;,</span><br><span class="line">        &quot;log&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;watch_options&quot;: &#123;</span><br><span class="line">        &quot;followSymlinks&quot;: false</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;max_memory_restart&quot;: &quot;1G&quot;, // 根据内存限制重新启动应用程序。</span><br><span class="line">    &quot;error_file&quot;: &quot;./logs/novel-apierr.log&quot;,  // 错误日志路径</span><br><span class="line">    &quot;out_file&quot;: &quot;./logs/novel-api-out.log&quot;,   // 普通日志路径</span><br><span class="line">    &quot;env&quot;: &#123;</span><br><span class="line">        &quot;DEBUG&quot;: &quot;novel-api&quot;,  // 环境变量参数，debug名字为novel-api，8080端口监听</span><br><span class="line">        &quot;PORT&quot;: &quot;8080&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>package.json文件添加npm run deploy部署命令。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;deploy&quot;: &quot;pm2 start pm2.json&quot;</span><br></pre></td></tr></table></figure></p>
<p>pm2 常用命令。<br>pm2 save  保存当前进程列表。<br>pm2 resurrect  启动之前保存的进程列表。<br>pm2 restart app.js|app_name 重启进程<br>pm2 start app.js  启动进程<br>pm2 list 查看进程列表<br>pm2 stop app_name |app_id 停止指定的应用。 all 停止所有应用</p>
<h2 id="第二步购买服务器和域名"><a href="#第二步购买服务器和域名" class="headerlink" title="第二步购买服务器和域名"></a>第二步购买服务器和域名</h2><p>购买服务器<a href="https://buy.cloud.tencent.com/cvm?tab=lite" target="_blank" rel="noopener">https://buy.cloud.tencent.com/cvm?tab=lite</a>，我买的是CentOS 7.4 64位 1 核 2 GB 1 Mbps的服务器。如果只是尝试部署流程，可以选择按时计费。<br>购买域名<a href="https://dnspod.cloud.tencent.com/?from=qcloudProductDns" target="_blank" rel="noopener">https://dnspod.cloud.tencent.com/?from=qcloudProductDns</a>建议选.com的域名。</p>
<h2 id="第三步设置子域名"><a href="#第三步设置子域名" class="headerlink" title="第三步设置子域名"></a>第三步设置子域名</h2><p>添加一个api开头的子域名<a href="https://console.cloud.tencent.com/domain" target="_blank" rel="noopener">https://console.cloud.tencent.com/domain</a>，然后添加解析。<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://hexo-1252491761.file.myqcloud.com/%E9%83%A8%E7%BD%B2%E5%B0%8F%E8%AF%B4api%E6%9C%8D%E5%8A%A1%E5%88%B0%E8%85%BE%E8%AE%AF%E4%BA%91/QQ%E5%9B%BE%E7%89%8720180529113617.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<h2 id="第四步登陆服务器安装软件"><a href="#第四步登陆服务器安装软件" class="headerlink" title="第四步登陆服务器安装软件"></a>第四步登陆服务器安装软件</h2><p>登陆到服务器然后执行以下安装命令。</p>
<h3 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install -y nginx</span><br><span class="line">nginx -v</span><br></pre></td></tr></table></figure>
<h3 id="安装nvm"><a href="#安装nvm" class="headerlink" title="安装nvm"></a>安装nvm</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh | bash</span><br><span class="line">nvm --version</span><br></pre></td></tr></table></figure>
<h3 id="安装node和pm2、apidoc"><a href="#安装node和pm2、apidoc" class="headerlink" title="安装node和pm2、apidoc"></a>安装node和pm2、apidoc</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nvm install 8.9.0</span><br><span class="line">nvm use 8.9.0</span><br><span class="line">node -v</span><br><span class="line">npm -v</span><br><span class="line">npm install -g pm2 apidoc</span><br></pre></td></tr></table></figure>
<h3 id="安装git"><a href="#安装git" class="headerlink" title="安装git"></a>安装git</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">yum install -y curl-devel expat-devel gettext-devel openssl-devel zlib-devel tar</span><br><span class="line">yum install -y gcc-c++ perl-ExtUtils-MakeMaker</span><br><span class="line">cd /usr/src</span><br><span class="line">wget https://www.kernel.org/pub/software/scm/git/git-2.9.5.tar.gz</span><br><span class="line">tar xf git-2.9.5.tar.gz</span><br><span class="line">cd git-2.9.5</span><br><span class="line">make configure</span><br><span class="line">make profix=/usr/git</span><br><span class="line">make install</span><br><span class="line">echo &quot;export PATH=$PATH:/usr/git/bin&quot; &gt;&gt; /etc/profile</span><br><span class="line">source /etc/profile</span><br><span class="line">git --version </span><br><span class="line">// 配置git</span><br><span class="line">git config --global user.name &quot;用户名称&quot;</span><br><span class="line">git config --global user.email 电子邮件地址</span><br></pre></td></tr></table></figure>
<h2 id="在服务器上克隆git仓库"><a href="#在服务器上克隆git仓库" class="headerlink" title="在服务器上克隆git仓库"></a>在服务器上克隆git仓库</h2><p>先进入home路径创建wwwroot文件夹。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /home &amp;&amp; mkdir wwwroot</span><br><span class="line">cd wwwroot</span><br><span class="line">git clone https://github.com/lanpangzhi/novel-api.git</span><br><span class="line">cd novel-api</span><br><span class="line">npm install</span><br><span class="line">npm run doc</span><br><span class="line">npm run deploy</span><br></pre></td></tr></table></figure></p>
<p>这个应用就pm2被启动了。</p>
<h2 id="配置nginx"><a href="#配置nginx" class="headerlink" title="配置nginx"></a>配置nginx</h2><p>先启动nginx。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx</span><br></pre></td></tr></table></figure></p>
<p><a href="http://123.206.45.87" target="_blank" rel="noopener">http://123.206.45.87</a> 在浏览器输入服务器ip就可以看到nginx已经启动了。<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://hexo-1252491761.file.myqcloud.com/%E9%83%A8%E7%BD%B2%E5%B0%8F%E8%AF%B4api%E6%9C%8D%E5%8A%A1%E5%88%B0%E8%85%BE%E8%AE%AF%E4%BA%91/QQ%E5%9B%BE%E7%89%8720180529134733.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br>进入nginx配置目录，新建文件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/nginx/conf.d</span><br><span class="line">touch api.langpz.com-8080.conf</span><br></pre></td></tr></table></figure></p>
<p>如果一台服务器的server比较多，建议用域名和端口做配置文件名。<br>编辑api.langpz.com-8080.conf 配置文件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi api.langpz.com-8080.conf</span><br></pre></td></tr></table></figure></p>
<p>把下面代码复制粘贴过去。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">upstream novel-api &#123;</span><br><span class="line">    server 127.0.0.1:8080;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name 你自己的域名;</span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass http://novel-api;</span><br><span class="line">        proxy_set_header   X-Real-IP        $remote_addr;</span><br><span class="line">        proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;</span><br><span class="line">        proxy_set_header   Host             $http_host;</span><br><span class="line">        proxy_set_header   X-NginX-Proxy    true;</span><br><span class="line">        proxy_redirect     off;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ctrl + c 输入:wq  退出并保存。再执行nginx -s reload 在浏览器输入你的域名就可以看到文档，<a href="http://api.langpz.com" target="_blank" rel="noopener">http://api.langpz.com</a></p>
<h3 id="gzip压缩"><a href="#gzip压缩" class="headerlink" title="gzip压缩"></a>gzip压缩</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/nginx/</span><br><span class="line">vi nginx.conf</span><br></pre></td></tr></table></figure>
<p>把下面代码复制粘贴过去。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">## gzip压缩</span><br><span class="line">gzip on;</span><br><span class="line"># ie6不启用gzip</span><br><span class="line">gzip_disable &quot;msie6&quot;;</span><br><span class="line">gzip_vary on;</span><br><span class="line">gzip_proxied any;</span><br><span class="line"># 压缩等级 1-9</span><br><span class="line">gzip_comp_level 2;</span><br><span class="line">gzip_buffers 16 8k;</span><br><span class="line">gzip_http_version 1.1;</span><br><span class="line"># 为除“text/html”之外的MIME类型启用压缩</span><br><span class="line">gzip_types text/plain text/css application/json application/x-javascript image/gif image/jpeg image/png image/tiff image/x-icon application/font-woff application/vnd.ms-fontobject text/javascript;</span><br></pre></td></tr></table></figure></p>
<p>ctrl + c 输入:wq  退出并保存。再执行nginx -s reload。可以去站长之家看你的压缩率<a href="http://tool.chinaz.com/gzips/" target="_blank" rel="noopener">http://tool.chinaz.com/gzips/</a><br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://hexo-1252491761.file.myqcloud.com/%E9%83%A8%E7%BD%B2%E5%B0%8F%E8%AF%B4api%E6%9C%8D%E5%8A%A1%E5%88%B0%E8%85%BE%E8%AE%AF%E4%BA%91/QQ%E5%9B%BE%E7%89%8720180529140415.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<h3 id="隐藏nginx版本号"><a href="#隐藏nginx版本号" class="headerlink" title="隐藏nginx版本号"></a>隐藏nginx版本号</h3><p>还是修改nginx.conf这个文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi nginx.conf</span><br><span class="line"></span><br><span class="line">// 把下面代码复制过去</span><br><span class="line"># 隐藏nginx版本号</span><br><span class="line">server_tokens off;</span><br></pre></td></tr></table></figure></p>
<p>ctrl + c 输入:wq  退出并保存。再执行nginx -s reload。<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://hexo-1252491761.file.myqcloud.com/%E9%83%A8%E7%BD%B2%E5%B0%8F%E8%AF%B4api%E6%9C%8D%E5%8A%A1%E5%88%B0%E8%85%BE%E8%AE%AF%E4%BA%91/QQ%E5%9B%BE%E7%89%8720180529140928.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br>这里就不显示nginx版本号了。</p>
<h3 id="配置ssl证书https，给你的网站加个小绿锁"><a href="#配置ssl证书https，给你的网站加个小绿锁" class="headerlink" title="配置ssl证书https，给你的网站加个小绿锁"></a>配置ssl证书https，给你的网站加个小绿锁</h3><p>我用的是腾讯云的免费证书，也可以自己生成。<a href="https://cloud.tencent.com/product/ssl?from=qcloudHpHeaderSsl" target="_blank" rel="noopener">https://cloud.tencent.com/product/ssl?from=qcloudHpHeaderSsl</a>，使用域名免费版。</p>
<h4 id="申请腾讯云ssl证书"><a href="#申请腾讯云ssl证书" class="headerlink" title="申请腾讯云ssl证书"></a>申请腾讯云ssl证书</h4><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://hexo-1252491761.file.myqcloud.com/%E9%83%A8%E7%BD%B2%E5%B0%8F%E8%AF%B4api%E6%9C%8D%E5%8A%A1%E5%88%B0%E8%85%BE%E8%AE%AF%E4%BA%91/QQ%E5%9B%BE%E7%89%8720180529141439.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure>
<p>直接点下一步，然后用推荐选项验证。申请很快不到十分钟就下来，到时候还会有邮件和短信通知。</p>
<h4 id="下载证书上传到服务器"><a href="#下载证书上传到服务器" class="headerlink" title="下载证书上传到服务器"></a>下载证书上传到服务器</h4><p>找到腾讯云的ssl证书管理去下载证书。<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://hexo-1252491761.file.myqcloud.com/%E9%83%A8%E7%BD%B2%E5%B0%8F%E8%AF%B4api%E6%9C%8D%E5%8A%A1%E5%88%B0%E8%85%BE%E8%AE%AF%E4%BA%91/QQ%E5%9B%BE%E7%89%8720180529142105.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure><br>压缩包里面有三个文件夹找到Nginx这个文件夹。<br>在服务器进入nginx所在目录新建一个文件夹。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/nginx/</span><br><span class="line">mkdir api.langpz.com</span><br></pre></td></tr></table></figure></p>
<p>然后把Nginx文件夹里面两个文件上传到服务器/etc/nginx/api.langpz.com 这个文件夹里面。<br>可以下载一个FileZilla软件或者下载一个别的ftp工具，还可以用命令行，我这里下载了FileZilla使用它去上传。</p>
<h4 id="加强-HTTPS-安全性"><a href="#加强-HTTPS-安全性" class="headerlink" title="加强 HTTPS 安全性"></a>加强 HTTPS 安全性</h4><p>首先在目录 /etc/nginx/api.langpz.com 运行以下代码生成 dhparam.pem 文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/nginx/api.langpz.com	</span><br><span class="line">openssl dhparam -out dhparam.pem 2048</span><br></pre></td></tr></table></figure></p>
<h4 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/nginx/conf.d</span><br><span class="line">touch api.langpz.com-8080.conf</span><br></pre></td></tr></table></figure>
<p>把下面代码覆盖api.langpz.com-8080.conf文件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">upstream novel-api &#123;</span><br><span class="line">    server 127.0.0.1:8080;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 配置共享会话缓存大小</span><br><span class="line">ssl_session_cache shared:SSL:10m;</span><br><span class="line"># 配置会话超时时间</span><br><span class="line">ssl_session_timeout 10m;</span><br><span class="line"></span><br><span class="line"># 强制跳转https</span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name api.langpz.com;</span><br><span class="line">    return 301 https://$server_name$request_uri;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line"> listen 443 ssl;</span><br><span class="line"> server_name api.langpz.com;</span><br><span class="line"></span><br><span class="line"> # 证书文件</span><br><span class="line"> ssl_certificate      /etc/nginx/api.langpz.com/1_api.langpz.com_bundle.crt;</span><br><span class="line"> # 私钥文件</span><br><span class="line"> ssl_certificate_key  /etc/nginx/api.langpz.com/2_api.langpz.com.key;</span><br><span class="line"> # 设置长连接</span><br><span class="line"> keepalive_timeout    70;</span><br><span class="line"> # 优先采取服务器算法</span><br><span class="line"> ssl_prefer_server_ciphers on;</span><br><span class="line"> # 使用DH文件</span><br><span class="line"> ssl_dhparam /etc/nginx/api.langpz.com/dhparam.pem;</span><br><span class="line"> ssl_protocols TLSv1 TLSv1.1 TLSv1.2;</span><br><span class="line"> # 定义算法</span><br><span class="line"> ssl_ciphers &quot;EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 EECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 EECDH EDH+aRSA !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS !RC4&quot;;</span><br><span class="line"> # HSTS策略</span><br><span class="line"> add_header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains;preload&quot; always;</span><br><span class="line"> # 防XSS攻擊</span><br><span class="line"> add_header X-Xss-Protection 1;</span><br><span class="line"> # 禁止服务器自动解析资源类型</span><br><span class="line"> add_header X-Content-Type-Options nosniff;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"> location / &#123;</span><br><span class="line">    proxy_pass http://novel-api;</span><br><span class="line">    proxy_set_header   X-Real-IP        $remote_addr;</span><br><span class="line">    proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;</span><br><span class="line">    proxy_set_header   Host             $http_host;</span><br><span class="line">    proxy_set_header   X-NginX-Proxy    true;</span><br><span class="line">    proxy_redirect     off;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ctrl + c 输入:wq  退出并保存。再执行nginx -s reload。<br>现在就可以访问<a href="https://api.langpz.com" target="_blank" rel="noopener">https://api.langpz.com</a>。如果访问http协议就会强制跳转到https协议。<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://hexo-1252491761.file.myqcloud.com/%E9%83%A8%E7%BD%B2%E5%B0%8F%E8%AF%B4api%E6%9C%8D%E5%8A%A1%E5%88%B0%E8%85%BE%E8%AE%AF%E4%BA%91/QQ%E5%9B%BE%E7%89%8720180529143306.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<h2 id="SSL安全测试"><a href="#SSL安全测试" class="headerlink" title="SSL安全测试"></a>SSL安全测试</h2><p><a href="https://www.ssllabs.com/ssltest/index.html" target="_blank" rel="noopener"></a><br>输入你的域名。<br>之前在nginx配置加强 HTTPS 安全性，所以结果是A+。<br><figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="http://hexo-1252491761.file.myqcloud.com/%E9%83%A8%E7%BD%B2%E5%B0%8F%E8%AF%B4api%E6%9C%8D%E5%8A%A1%E5%88%B0%E8%85%BE%E8%AE%AF%E4%BA%91/QQ%E5%9B%BE%E7%89%8720180529143835.png" alt="" title="">
                </div>
                <div class="image-caption"></div>
            </figure></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这种部署比较麻烦，部署完发现pm2也有部署功能，2.0用koa.js重构的时候用pm2部署，docker 生成镜像。</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://nginx.org/en/docs/" target="_blank" rel="noopener">https://nginx.org/en/docs/</a><br><a href="https://github.com/creationix/nvm" target="_blank" rel="noopener">https://github.com/creationix/nvm</a><br><a href="https://www.thinkjs.org/zh-cn/doc/3.0/deploy.html" target="_blank" rel="noopener">https://www.thinkjs.org/zh-cn/doc/3.0/deploy.html</a><br><a href="https://www.cnblogs.com/chyingp/p/pm2-documentation.html" target="_blank" rel="noopener">https://www.cnblogs.com/chyingp/p/pm2-documentation.html</a><br><a href="http://www.runoob.com/git/git-install-setup.html" target="_blank" rel="noopener">http://www.runoob.com/git/git-install-setup.html</a><br><a href="https://nginx.rails365.net/chapters/install.html" target="_blank" rel="noopener">https://nginx.rails365.net/chapters/install.html</a><br><a href="https://www.cnblogs.com/nuccch/p/7681592.html" target="_blank" rel="noopener">https://www.cnblogs.com/nuccch/p/7681592.html</a><br><a href="https://aotu.io/notes/2016/08/16/nginx-https/index.html" target="_blank" rel="noopener">https://aotu.io/notes/2016/08/16/nginx-https/index.html</a></p>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2018-06-21T08:05:23.865Z" itemprop="dateUpdated">2018-06-21 08:05:23</time>
</span><br>


        
        <a href="/部署小说api服务到腾讯云.html" target="_blank" rel="external">http://blog.langpz.com/部署小说api服务到腾讯云.html</a>
        
    </div>
    
    <footer>
        <a href="http://blog.langpz.com">
            <img src="/img/avatar.png" alt="lanpangzhi">
            lanpangzhi
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/API/">API</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Express/">Express</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Node-js/">Node.js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/部署/">部署</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.langpz.com/部署小说api服务到腾讯云.html&title=《部署小说api服务到腾讯云》 — 蓝胖纸&pic=http://blog.langpz.com/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.langpz.com/部署小说api服务到腾讯云.html&title=《部署小说api服务到腾讯云》 — 蓝胖纸&source=部署小说api服务到腾讯云小说api1.0版本写完了，接下来就开始部署到服务器上，用到了nginx、pm2、nvm、git、OpenSSL。" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.langpz.com/部署小说api服务到腾讯云.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《部署小说api服务到腾讯云》 — 蓝胖纸&url=http://blog.langpz.com/部署小说api服务到腾讯云.html&via=http://blog.langpz.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.langpz.com/部署小说api服务到腾讯云.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/webpack入门指南.html" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">webpack4.0入门指南（一）安装和转换es6语法</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/使用apidoc文档神器，快速生成api文档.html" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">使用apidoc文档神器，快速生成api文档</h4>
      </a>
    </div>
  
</nav>



    











    <!-- Valine Comments -->
    <div class="comments vcomment" id="comments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail,link'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            el: '#comments',
            notify: 'true' == 'true',
            verify: 'false' == 'true',
            appId: "UbXfwhbx6jnOYqOLwxCBCWOh-gzGzoHsz",
            appKey: "ivuSqsuVkomI9MQzJXCoFRbR",
            avatar: "mm",
            placeholder: "Just go go",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
        })
    </script>
    <!-- Valine Comments end -->







</article>



</div>

        <footer class="footer">
    <div class="top">
        

        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss" rel="external nofollow"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>lanpangzhi &copy; 2016 - 2018</span>
            <span>
                
                <a href="http://www.miitbeian.gov.cn/" target="_blank" rel="external nofollow">京ICP备17033838号</a><br>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank" rel="external nofollow">indigo</a>
            </span>
        </p>
        <p>Hosted by <a href="https://pages.coding.me" target="_blank" style="font-weight: bold" rel="external nofollow">Coding Pages</a></p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.langpz.com/部署小说api服务到腾讯云.html&title=《部署小说api服务到腾讯云》 — 蓝胖纸&pic=http://blog.langpz.com/img/avatar.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.langpz.com/部署小说api服务到腾讯云.html&title=《部署小说api服务到腾讯云》 — 蓝胖纸&source=部署小说api服务到腾讯云小说api1.0版本写完了，接下来就开始部署到服务器上，用到了nginx、pm2、nvm、git、OpenSSL。" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.langpz.com/部署小说api服务到腾讯云.html" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《部署小说api服务到腾讯云》 — 蓝胖纸&url=http://blog.langpz.com/部署小说api服务到腾讯云.html&via=http://blog.langpz.com" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.langpz.com/部署小说api服务到腾讯云.html" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACM0lEQVR42u3aS3KDQAxFUe9/03iaQWjfJ4HLqC+jlIlxHwYq/V4vfB1/rrO75D+v/W58yZAh47GMY3md/QC5y49Innx2NhkyZOzD4I9ef7J+ESTUrr91+rkMGTJkhAExfQJ/fTJkyJCRPm4dcHnhShJQGTJkyKiFTl6gpuH7xlpchgwZD2TU2vff+fuW+YYMGTIexTjCiySU6fgzHQb8cyoZMmSMZtQK1KsO3Qm4MmTI2I2xvtFp3NeKW7KicUqVIUPGaEZnfFhbpCAHLQZlGTJkDGLwYrUzNuDhOB1hfqjFZciQMYLB41VtOSNdciUvIp7EypAhYxCjX9byw9VacqgKlyFDxjgGt5KkjTfmeBsOpaEyZMgYzej8JG+okcI1fZUoQZQhQ8YIRm1kWGu01VLDuNEmQ4aMoQzevufhMl0ja30iQ4aM0Yyryks+WliH+NoKmgwZMmYzyKJD/6C89Z8OU2XIkLEbo5PApcsTncWyYM1ChgwZIxg8/HU+qQ1Hi6tjMmTIGMpIQ2caHMlz4mHAuncoQ4aMoYx0SYKnjJ0hBOHJkCFjH0a6bNEZEqSBGzXyZMiQMZTRH0nyojRtt/H/kSFDxmwGv0jqxo9CkJ1EU4YMGfMYJMjy9DHFrJ8TnEGGDBkbMEhxywMxT906qacMGTJk8BSNBMd+8veBKkOGDBk4Rau1+9MljBsDrgwZMn6YwRtqnSDLS9Y4oZQhQ8ZoBv/atWtk6d0LphwyZMh4HuMNplQD8dwYAb0AAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>








<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '死鬼去哪里了！';
            clearTimeout(titleTime);
        } else {
            document.title = '(つェ⊂)咦!又好了!';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":100,"height":200},"mobile":{"show":false},"react":{"opacityDefault":1,"opacityOnHover":0.2}});</script></body>
</html>
